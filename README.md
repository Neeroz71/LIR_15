# Разработка программно апаратного комплекса для сбора и анализа данных на основе датчика перемещения ЛИР-15
........................................................................  
Студент: Харламов М. О. ВКИ НГУ  
........................................................................  
# Основные компоненты    
  + ЛИР-15-20-01-05-ПИ10-2-2.5  
  + Arduino uno  
  + HC-05
# Необходимый софт
  + Arduino IDE  
  + Visual Studio Code 
  + Библиотеки для python:  
  
        requests  
        Matplotlib Pilot  
        NumPy Pilot  
        PYQT  
# ТЗ
  Разработать программно апаратный комплекс для сбора и анализа данных на основе датчика перемещения ЛИР-15, комплекс должен иметь такие возможности как:  
  
  + Выводить график
  + Кнопки взаимодействия с графиком  
  + Иметь выбор частоты обновления точек позиции  
  + Иметь выбор едениц измерения  
  + Сбрасывать позицию по нажатию кнопки  
  + Выбор COM порта  
  + Записывать данные в текстовый документ  
  + Отправлять данные на сервер (пока что в Telegram)  
  
# Первоначальная настройка блютуз модуля HC-05 через AT-команды
Если у вас не настроенный блютуз модуль то нужно сделать следующе действия:  
  
+ Запустите файл [HC05_AT_comands.ino](https://github.com/Neeroz71/LIR_15/blob/e09922a20f8a7f8cdbdd1b0291ac6bd0cb7d2a8d/HC05_AT_comands.ino) в среде Arduino IDE  
+ Подключите выходы TX, RX от HC-05 к ардуино пинам 10,11 соответсвенно, RX к pin11 через делитель напряжения 5V→3.3V, TX к pin10 напрямую, VCC HC-05 к 5V arduino, GND HC-05 к GND arduino  
+ Запустите программу на скорости 9600BAUD и в режиме Serial port (NL & CR)  
+ Подключите питание к HC-05 с жатой кнопкой KEY, тогда HC-05 перейдёт в режим AT команд  
  
Напишите следующие AT команды:  
  
    AT  
    AT+UART=115200,1,0 // Скорость 
    AT+NAME=LIR15     // Имя
    AT+ROLE=0         // Slave-режим  
    AT+CMODE=1        // Подключение к любому устройству  
    AT+PSWD="ваш пароль"  // Пароль  
    AT+INIT           // Инициализация профиля SPP  
HC-05 готов к работе  

# Запуск проограммы для ЛИР-15
+ Подключите все по схеме из файла [Scheme.png](https://github.com/Neeroz71/LIR_15/blob/c10613997a630aaeedf29c867f19b2f7fb4dfdcd/Scheme.png) в этом файле представлена схема в среде Fritzing, к сожелению в ней нету разьёма PC10TB который имеет наш датчик поэтому я схемотично нарисовал разьём с 10 пинами как у PC10TB из этого файла [PC10TB.png](https://github.com/Neeroz71/LIR_15/blob/f1e7c0295d92306907926a0c61a72b1689f5900c/PC10TB.png) используйте распайку разьема под буквой A соответсенно
+ Запустите файл [LIR-15_TTL.ino](https://github.com/Neeroz71/LIR_15/blob/71f800423732c0921bcdbf73c49f1f4220726394/LIR-15_TTL.ino) в в среде Arduino IDE и загрузите его в Arduino с отключенным HC-05, после загрузки подключите HC-05 обратно
+ Запустите файл [LIR-15_GUI.py](https://github.com/Neeroz71/LIR_15/blob/71f800423732c0921bcdbf73c49f1f4220726394/LIR-15_GUI.py) в среде Visual Studio Code
+ Подключите HC-05 через блютуз к пк
+ Ведите свой com порт в код питона (COM порт нужно посмотреть в {Других параметрах bluetooth})
+ При обрыве одной из 4 линий (A, A_inv, B, B_inv) начинает мигать светодиод
+ Прграмма работает
